(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{252:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(9),s=n.n(i),a=n(5),c=n(13);var p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{text:""}],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"PREVIEW_LINE":return console.log("PREVIEW_LINE",n.no,n.preview),t.map(function(e,t){return t!==n.no?e:{text:e.text,preview:n.preview}});case"CHANGE_LINE":return console.log("CHANGE_LINE",n.no,n.text),t.map(function(e,t){return t!==n.no?e:{text:n.text,preview:n.preview}});case"INSERT_LINE":return console.log("INSERT_LINE",n.no,n.text),(e=t.slice()).splice(n.no,0,{text:n.text,preview:n.preview}),e;case"DELETE_LINE":return console.log("DELETE_LINE",n.no),(e=t.slice()).splice(n.no,1),e}return t};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{col:0,row:0,dirty:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURSOR":return{row:t.row,col:t.col,dirty:t.dirty}}return e},u=Object(a.b)({lines:p,cursor:l}),h=n(10),f=n(11),d=n(14),v=n(12),g=n(15),m=function(e,t,n){return{type:"CHANGE_LINE",text:t,preview:n,no:e}},E=function(e,t,n){return{type:"INSERT_LINE",text:t,preview:n,no:e}},b=function(e,t,n){return{type:"SET_CURSOR",row:e,col:t,dirty:n}},y=n(2),k=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(v.a)(t).call(this,e))).send=n.send.bind(Object(y.a)(n)),n.keyHandler=n.keyHandler.bind(Object(y.a)(n)),n.clickHandler=n.clickHandler.bind(Object(y.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"send",value:function(e){this.props.onChange(this.props.no,e.target.value)}},{key:"keyHandler",value:function(e){switch(e.keyCode){case 9:this.props.onTab(this.props.no,this.props.text,e.shiftKey),e.preventDefault();break;case 38:this.props.onUp(this.props.no,e.target.selectionStart,this.props.text);break;case 40:this.props.onDown(this.props.no,e.target.selectionStart,this.props.text);break;case 37:0===e.target.selectionStart&&0===e.target.selectionEnd&&this.props.onLeftUp(this.props.no);break;case 39:e.target.selectionStart===this.props.text.length&&this.props.onDown(this.props.no,0,this.props.text);break;case 13:this.props.onEnter(this.props.no,this.props.text,e.target.selectionStart,e.shiftKey)||e.preventDefault();break;case 8:0===e.target.selectionStart&&0===e.target.selectionEnd&&(this.props.onBS(this.props.no,this.props.text),e.preventDefault())}}},{key:"clickHandler",value:function(e){this.props.onClick(this.props.no)}},{key:"render",value:function(){return this.props.isBlock?o.a.createElement("div",{className:"line "+this.props.className,onClick:this.clickHandler},o.a.createElement("div",{style:{display:this.props.isFocus?"block":"none"}},o.a.createElement("textarea",{ref:"rawInput",style:{height:this.props.height},onChange:this.send,onKeyDown:this.keyHandler,value:this.props.text})),o.a.createElement("div",null,o.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.preview}}))):o.a.createElement("div",{className:"line "+this.props.className,onClick:this.clickHandler},o.a.createElement("div",{style:{display:this.props.isFocus?"block":"none"}},o.a.createElement("textarea",{ref:"rawInput",style:{height:this.props.height},onChange:this.send,onKeyDown:this.keyHandler,value:this.props.text})),o.a.createElement("div",{style:{display:this.props.isFocus?"none":"block"}},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.preview}})))}},{key:"updateFocus",value:function(){if(this.props.isFocus&&(this.refs.rawInput.focus(),this.props.dirty)){var e=this;setTimeout(function(){console.log("update cursor"),e.refs.rawInput.setSelectionRange(e.props.column,e.props.column),e.props.onRefreshed(e.props.no)},10)}}},{key:"componentDidUpdate",value:function(){this.updateFocus()}},{key:"componentDidMount",value:function(){this.updateFocus()}}]),t}(o.a.Component),x=n(6),w=n(32),O=n.n(w);function j(e,t){return{kind:e,body:t}}function I(e,t,n){var r=-1,o="";return t.forEach(function(t){var i=e.indexOf(t,n);-1!=i&&(-1==r||r>i)&&(r=i,o=t)}),{pos:r,target:o}}var N=function(e,t){if(L(t)){var n=_(t),r=n[0],o=n.slice(1),i=r.split(/\s+/),s="";if(">>"===i[0])switch(i[1]){case"pre":s+="<span class='mode'>&gt;&gt; pre</span>",s+="<pre>"+o.join("\n")+"</pre>";break;case"mermaid":s+="<span class='mode'>&gt;&gt; mermaid</span>",s+=function(e,t){var n="";try{var r="mermaid"+e,o=document.getElementById(r);o&&(o.innerHTML="",o.parentNode.removeChild(o)),x.mermaidAPI.parse(t.join("\n")),x.mermaidAPI.render(r,t.join("\n"),function(e){n=e})}catch(i){console.log(i),n="<pre class='error'>"+i.str+"</pre>"}return"<div style='width:100%;'>"+n+"</div>"}(e,o);break;case"code":s+="<span class='mode'>&gt;&gt; code</span>",console.log("CODE PART",o),s+=function(e,t){return'<pre class="hljs">'+O.a.highlightAuto(t.join("\n")).value+"</pre>"}(0,o);break;default:s+="<pre>"+t+"</pre>"}else s+="<pre>"+t+"</pre>";return s}return 0===t.indexOf("###")?"<div>"+t+"<div>":0===t.indexOf("##")?"<div>"+t+"<div>":0===t.indexOf("#")?"<div>"+t+"<div>":"<div>"+function e(t){var n,r=[];return t.forEach(function(t){if(Array.isArray(t)){(n=e(t)).split(/\s+/,2);var o=n.match(/\s+/);o&&(o[0],n.slice(0,o.index)),r.push("{{"),r.push(n),r.push("}}")}else switch(t.kind){case"text":r.push(t.body);break;case"url":r.push("<a href='"+t.body+"'>"+t.body+"</a><a href='http://b.hatena.ne.jp/entry/"+t.body+"' target='_blank'><img src='http://b.hatena.ne.jp/entry/image/"+t.body+"' /></a>")}}),r.join("")}(function(e){var t=0;return function n(r){for(var o=[];;){var i;if("{{"==(i=I(e,0==r?["{{","}}","http://","https://"]:["{{","}}"],t)).target)o.push(j("text",e.slice(t,i.pos))),t=i.pos+"{{".length,o.push(n(r+1));else if("}}"==i.target){if(o.push(j("text",e.slice(t,i.pos))),t=i.pos+"}}".length,r>0)break}else{if("https://"!=i.target&&"http://"!=i.target){o.push(j("text",e.slice(t,e.length))),t=e.length;break}t!=i.pos&&o.push(j("text",e.slice(t,i.pos)));var s=I(e,[" ","\r","\n"],i.pos+i.target.length);if(-1==s.pos){o.push(j("url",e.slice(i.pos,e.length))),t=e.length;break}o.push(j("url",e.slice(i.pos,s.pos))),t=s.pos}}return o}(0)}(t))+"</div>"},L=function(e){return 0===e.indexOf(">>")},C=function(e,t){var n,r=t.split(/[\r\n]/),o=0;for(n=0;n<r.length;n++)if((o+=r[n].length+1)>e)return[e-(o-r[n].length-1),n];console.log("error getPos")},_=function(e){return e.split(/[\r\n]/)},S=function(e){return e.split(/[\r\n]/).length},D=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.props.lines.map(function(t,n){return o.a.createElement(k,Object.assign({key:n},t,{onChange:e.props.onChange,onUp:e.props.onUp(0===n?"":e.props.lines[n-1]),onDown:e.props.onDown(n>=e.props.lines.length-1?"":e.props.lines[n+1].text),onEnter:e.props.onEnter,onTab:e.props.onTab,onClick:e.props.onClick,onLeftUp:e.props.onLeftUp(0===n?"":e.props.lines[n-1].text),onBS:e.props.onBSfunc(0===n?"":e.props.lines[n-1].text),onRefreshed:e.props.onRefreshed}))}))}}]),t}(o.a.Component),H=function(e,t,n,r){return r.map(function(r,o){return o===t?(r.isFocus=!0,r.column=e,r.dirty=n):r.isFocus=!1,r})},R=function(e){return e.map(function(e){return e.className=function(e){var t="normal";return L(e)?t="block":0===e.indexOf("###")?t="h3":0===e.indexOf("##")?t="h2":0===e.indexOf("#")&&(t="h1"),t}(e.text),e.isFocus&&(e.className+=" focus"),e})},T=function(e){return e.map(function(e){return e.height=16*S(e.text)+"px",e})},U=function(e){return e.map(function(e){return e.isBlock=L(e.text),e})},F=Object(c.b)(function(e,t){return{lines:R(U(T(H(e.cursor.col,e.cursor.row,e.cursor.dirty,(n=e.lines,n.map(function(e,t){return e.no=t,e})))))),cursor:e.cursor};var n},function(e){return{onChange:function(t,n){e(m(t,n,N(t,n)))},onUp:function(t){return function(n,r,o){if(!(n<=0)){var i=C(r,o);if(!(L(o)&&i[1]>0))if(L(t.text)){var s=_(t.text);s.pop();var a=s.join("\n");e(b(n-1,a.length+r,!0))}else e(b(n-1,r,!0))}}},onDown:function(t){return function(n,r,o){var i=S(o),s=C(r,o);if(!(L(o)&&s[1]<i-1))if(L(t)){var a=_(t)[0];e(b(n+1,Math.min(r,a.length),!0))}else e(b(n+1,r,!0))}},onEnter:function(t,n,r,o){if(L(n))return!o||(e(E(t+1,"","")),e(b(t+1,0,!0)),!1);e(b(t+1,0,!0)),void 0===n&&(n="");var i=n.slice(0,r);e(m(t,i,N(t,i)));var s=n.slice(r);return e(E(t+1,s,N(t+1,s))),!1},onTab:function(t,n,r){r?0===n.search(/-+ /)&&(n=0===n.indexOf("- ")?n.slice(2):n.slice(1)):n=0===n.search(/-+/)?"-"+n:"- "+n,e(m(t,n,N(t,n)))},onLeftUp:function(t){return function(n){n>0&&e(b(n-1,t.length,!0))}},onBSfunc:function(t){return function(n,r){e(b(n-1,t.length,!0));var o=t+r;e(m(n-1,o,N(n-1,o))),e(function(e,t){return{type:"DELETE_LINE",text:t,no:e}}(n))}},onClick:function(t){e(b(t,0,!1))},onRefreshed:function(t){e(b(t,0,!1))}}})(D),A=function(){return o.a.createElement("div",null,o.a.createElement(F,null))},P=(n(252),n(253),Object(a.c)(u));function B(e,t){P.dispatch(E(e,t,N(e,t)))}x.mermaidAPI.initialize({startOnLoad:!0,theme:"forest"}),B(0,"# React.js\u3067\u4f5c\u3063\u305f\u30a4\u30f3\u30e9\u30a4\u30f3\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u30a8\u30c7\u30a3\u30bf"),B(1,"\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u7de8\u96c6\u304c\u3067\u304d\u308b\u66f8\u5f0f\u4ed8\u304d\u30a8\u30c7\u30a3\u30bf\u3067\u3059\u3002"),B(2,"http://inajob.hatenablog.jp URL\u81ea\u52d5\u30ea\u30f3\u30af\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002"),B(3,"\u30d6\u30ed\u30c3\u30af\u8a18\u6cd5\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f"),B(4,"## \u6574\u5f62\u6e08\u307f\u30c6\u30ad\u30b9\u30c8"),B(5,">> pre\n\u3000 \u2227,,\u2227\n \u3000( `\uff65\u03c9\uff65)\n \u3000/\u3000\u223d |"),B(6,"## \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30cf\u30a4\u30e9\u30a4\u30c8"),B(7,">> code\n//\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u307f\u305f\u3044\u306a\u306e\nfunction hoge(){\n  alert('Hello World');\n}"),B(8,"## mermaid\u306b\u3088\u308b\u4f5c\u753b"),B(9,">> mermaid\ngraph LR\n\u56f3\u3082\u63cf\u3051\u307e\u3059\nPlugin --\x3e Pre\n Plugin --\x3e Mermaid"),B(10,"# \u4f5c\u3063\u305f\u4eba"),B(11,"https://twitter.com/ina_ani"),B(12,"# GitHub"),B(13,"https://github.com/inajob/inline-editor"),s.a.render(o.a.createElement(c.a,{store:P},o.a.createElement(A,null)),document.getElementById("root"))},33:function(e,t,n){e.exports=n(254)},60:function(e,t,n){var r={"./locale":29,"./locale.js":29};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=60}},[[33,1,2]]]);
//# sourceMappingURL=main.41c44738.chunk.js.map