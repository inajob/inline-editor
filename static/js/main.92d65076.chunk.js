(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(n,e,t){n.exports=t(28)},27:function(n,e,t){},28:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t.n(o),s=t(5),c=t.n(s),i=t(3),a=t(9);var u=function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{text:""}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LINE":return console.log("CHANGE_LINE",t.no,t.text),e.map(function(n,e){return e!==t.no?n:{text:t.text}});case"APPEND_LINE":return console.log("APPEND_LINE",t.no,t.text),e.map(function(n,e){return e===t.no?{text:n.text+t.text}:n});case"INSERT_LINE":return console.log("INSERT_LINE",t.no,t.text),(n=e.slice()).splice(t.no,0,{text:t.text}),n;case"DELETE_LINE":return console.log("DELETE_LINE",t.no),(n=e.slice()).splice(t.no,1),n}return e};var p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{col:0,row:0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CURSOR":return{row:e.row,col:e.col}}return n},l=Object(i.b)({lines:u,cursor:p}),h=t(6),f=t(7),d=t(11),E=t(8),b=t(10),k=function(n,e){return{type:"CHANGE_LINE",text:e,no:n}},v=function(n,e){return{type:"INSERT_LINE",text:e,no:n}},g=function(n,e){return{type:"SET_CURSOR",row:n,col:e}},x=t(2),m=t(1),N=t.n(m),y=function(n){function e(n){var t;return Object(h.a)(this,e),(t=Object(d.a)(this,Object(E.a)(e).call(this,n))).send=t.send.bind(Object(x.a)(t)),t.keyHandler=t.keyHandler.bind(Object(x.a)(t)),t.clickHandler=t.clickHandler.bind(Object(x.a)(t)),t}return Object(b.a)(e,n),Object(f.a)(e,[{key:"send",value:function(n){this.props.onChange(this.props.no,n.target.value)}},{key:"keyHandler",value:function(n){switch(n.keyCode){case 38:this.props.onUp(this.props.no);break;case 40:this.props.onDown(this.props.no);break;case 37:0==n.target.selectionStart&&0==n.target.selectionEnd&&this.props.onUp(this.props.no);break;case 39:n.target.selectionStart==this.props.text.length&&this.props.onDown(this.props.no);break;case 13:this.props.onEnter(this.props.no,this.props.text,n.target.selectionStart),n.preventDefault();break;case 8:0==n.target.selectionStart&&0==n.target.selectionEnd&&(this.props.onBS(this.props.no,this.props.text),n.preventDefault())}}},{key:"clickHandler",value:function(n){this.props.onClick(this.props.no)}},{key:"render",value:function(){return r.a.createElement("div",{className:"line "+this.props.className},r.a.createElement("textarea",{ref:"rawInput",onChange:this.send,onKeyDown:this.keyHandler,onClick:this.clickHandler,value:this.props.text}))}},{key:"updateFocus",value:function(){this.props.isFocus&&this.refs.rawInput.focus()}},{key:"componentDidUpdate",value:function(){this.updateFocus()}},{key:"componentDidMount",value:function(){this.updateFocus()}}]),e}(r.a.Component);Text.propTypes={onChange:N.a.func.isRequired,onUp:N.a.func.isRequired,onDown:N.a.func.isRequired,onClick:N.a.func.isRequired,no:N.a.number.isRequires,text:N.a.string.isRequired};var w=y,O=function(n){function e(n){return Object(h.a)(this,e),Object(d.a)(this,Object(E.a)(e).call(this,n))}return Object(b.a)(e,n),Object(f.a)(e,[{key:"render",value:function(){var n=this;return r.a.createElement("div",null,this.props.lines.map(function(e,t){return r.a.createElement(w,Object.assign({key:t},e,{onChange:n.props.onChange,onUp:n.props.onUp,onDown:n.props.onDown,onEnter:n.props.onEnter,onClick:n.props.onClick,onBS:n.props.onBS}))}))}}]),e}(r.a.Component),C=function(n,e){return e.map(function(e,t){return e.isFocus=t==n,e})},j=function(n){return n.map(function(n){return n.className=function(n){var e="normal";return 0==n.indexOf("###")?e="h3":0==n.indexOf("##")?e="h2":0==n.indexOf("#")&&(e="h1"),e}(n.text),n.isFocus&&(n.className+=" focus"),n})},I=Object(a.b)(function(n,e){return{lines:j(C(n.cursor.row,(t=n.lines,t.map(function(n,e){return n.no=e,n})))),cursor:n.cursor};var t},function(n){return{onChange:function(e,t){n(k(e,t))},onUp:function(e){e>0&&n(g(e-1))},onDown:function(e){n(g(e+1))},onEnter:function(e,t,o){n(g(e+1)),void 0==t&&(t=""),n(k(e,t.slice(0,o))),n(v(e+1,t.slice(o)))},onBS:function(e,t){n(g(e-1)),n(function(n,e){return{type:"APPEND_LINE",text:e,no:n}}(e-1,t)),n(function(n,e){return{type:"DELETE_LINE",text:e,no:n}}(e))},onClick:function(e){n(g(e))}}})(O),D=function(){return r.a.createElement("div",null,r.a.createElement(I,null))},S=(t(27),Object(i.c)(l));S.subscribe(function(){return console.log("state",S.getState())});S.dispatch(v(0,"# React.js\u3067\u4f5c\u3063\u305f\u30a4\u30f3\u30e9\u30a4\u30f3\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u30a8\u30c7\u30a3\u30bf")),S.dispatch(v(1,"\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5\u306a\u3069\u307e\u3060\u304a\u304b\u3057\u3044\u3067\u3059\u3002")),S.dispatch(v(2,"## \u4f5c\u3063\u305f\u4eba")),S.dispatch(v(3,"@ina_ani")),c.a.render(r.a.createElement(a.a,{store:S},r.a.createElement(D,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.92d65076.chunk.js.map