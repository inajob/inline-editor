(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,n,t){e.exports=t(28)},27:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t.n(o),i=t(5),s=t.n(i),c=t(3),a=t(9);var u=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{text:""}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PREVIEW_LINE":return console.log("PREVIEW_LINE",t.no,t.preview),n.map(function(e,n){return n!==t.no?e:{text:e.text,preview:t.preview}});case"CHANGE_LINE":return console.log("CHANGE_LINE",t.no,t.text),n.map(function(e,n){return n!==t.no?e:{text:t.text,preview:t.preview}});case"INSERT_LINE":return console.log("INSERT_LINE",t.no,t.text),(e=n.slice()).splice(t.no,0,{text:t.text,preview:t.preview}),e;case"DELETE_LINE":return console.log("DELETE_LINE",t.no),(e=n.slice()).splice(t.no,1),e}return n};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{col:0,row:0},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_CURSOR":return{row:n.row,col:n.col}}return e},l=Object(c.b)({lines:u,cursor:p}),d=t(6),h=t(7),f=t(11),v=t(8),E=t(10),b=function(e,n,t){return{type:"CHANGE_LINE",text:n,preview:t,no:e}},k=function(e,n,t){return{type:"INSERT_LINE",text:n,preview:t,no:e}},w=function(e,n){return{type:"SET_CURSOR",row:e,col:n}},m=t(2),g=t(1),x=t.n(g),y=function(e){function n(e){var t;return Object(d.a)(this,n),(t=Object(f.a)(this,Object(v.a)(n).call(this,e))).send=t.send.bind(Object(m.a)(t)),t.keyHandler=t.keyHandler.bind(Object(m.a)(t)),t.clickHandler=t.clickHandler.bind(Object(m.a)(t)),t}return Object(E.a)(n,e),Object(h.a)(n,[{key:"send",value:function(e){this.props.onChange(this.props.no,e.target.value)}},{key:"keyHandler",value:function(e){switch(e.keyCode){case 38:this.props.onUp(this.props.no);break;case 40:this.props.onDown(this.props.no);break;case 37:0==e.target.selectionStart&&0==e.target.selectionEnd&&this.props.onUp(this.props.no);break;case 39:e.target.selectionStart==this.props.text.length&&this.props.onDown(this.props.no);break;case 13:this.props.onEnter(this.props.no,this.props.text,e.target.selectionStart),e.preventDefault();break;case 8:0==e.target.selectionStart&&0==e.target.selectionEnd&&(this.props.onBS(this.props.no,this.props.text),e.preventDefault())}}},{key:"clickHandler",value:function(e){this.props.onClick(this.props.no)}},{key:"render",value:function(){return r.a.createElement("div",{className:"line "+this.props.className,onClick:this.clickHandler},r.a.createElement("div",{style:{display:this.props.isFocus?"block":"none"}},r.a.createElement("textarea",{ref:"rawInput",onChange:this.send,onKeyDown:this.keyHandler,value:this.props.text})),r.a.createElement("div",{style:{display:this.props.isFocus?"none":"block"}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.preview}})))}},{key:"updateFocus",value:function(){this.props.isFocus&&this.refs.rawInput.focus()}},{key:"componentDidUpdate",value:function(){this.updateFocus()}},{key:"componentDidMount",value:function(){this.updateFocus()}}]),n}(r.a.Component);Text.propTypes={onChange:x.a.func.isRequired,onUp:x.a.func.isRequired,onDown:x.a.func.isRequired,onClick:x.a.func.isRequired,no:x.a.number.isRequires,text:x.a.string.isRequired};var O=y;var N=function(e){return console.log("Render",e),0==e.indexOf("###")?"<div>"+e+"<div>":0==e.indexOf("##")?"<div>"+e+"<div>":0==e.indexOf("#")?"<div>"+e+"<div>":"<div>"+e+"</div>"},C=function(e){function n(e){return Object(d.a)(this,n),Object(f.a)(this,Object(v.a)(n).call(this,e))}return Object(E.a)(n,e),Object(h.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.lines.map(function(n,t){return r.a.createElement(O,Object.assign({key:t},n,{onChange:e.props.onChange,onUp:e.props.onUp,onDown:e.props.onDown,onEnter:e.props.onEnter,onClick:e.props.onClick,onBS:e.props.onBSfunc(0==t?"":e.props.lines[t-1])}))}))}}]),n}(r.a.Component),I=function(e,n){return n.map(function(n,t){return n.isFocus=t==e,n})},j=function(e){return e.map(function(e){return e.className=function(e){var n="normal";return 0==e.indexOf("###")?n="h3":0==e.indexOf("##")?n="h2":0==e.indexOf("#")&&(n="h1"),n}(e.text),e.isFocus&&(e.className+=" focus"),e})},R=Object(a.b)(function(e,n){return{lines:j(I(e.cursor.row,(t=e.lines,t.map(function(e,n){return e.no=n,e})))),cursor:e.cursor};var t},function(e){return{onChange:function(n,t){e(b(n,t,N(t)))},onUp:function(n){n>0&&e(w(n-1))},onDown:function(n){e(w(n+1))},onEnter:function(n,t,o){e(w(n+1)),void 0==t&&(t="");var r=t.slice(0,o);e(b(n,r,N(r)));var i=t.slice(o);e(k(n+1,i,N(i)))},onBSfunc:function(n){return function(t,o){e(w(t-1));var r=n.text+o;e(b(t-1,r,N(r))),e(function(e,n){return{type:"DELETE_LINE",text:n,no:e}}(t))}},onClick:function(n){e(w(n))}}})(C),S=function(){return r.a.createElement("div",null,r.a.createElement(R,null))},_=(t(27),Object(c.c)(l));_.subscribe(function(){return console.log("state",_.getState())});_.dispatch(k(0,"# React.js\u3067\u4f5c\u3063\u305f\u30a4\u30f3\u30e9\u30a4\u30f3\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u30a8\u30c7\u30a3\u30bf",N("# React.js\u3067\u4f5c\u3063\u305f\u30a4\u30f3\u30e9\u30a4\u30f3\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u30a8\u30c7\u30a3\u30bf"))),_.dispatch(k(1,"\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5\u306a\u3069\u307e\u3060\u304a\u304b\u3057\u3044\u3067\u3059\u3002",N("\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5\u306a\u3069\u307e\u3060\u304a\u304b\u3057\u3044\u3067\u3059\u3002"))),_.dispatch(k(2,"## \u4f5c\u3063\u305f\u4eba",N("## \u4f5c\u3063\u305f\u4eba"))),_.dispatch(k(3,"@ina_ani",N("@ina_ani"))),s.a.render(r.a.createElement(a.a,{store:_},r.a.createElement(S,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.15c866f4.chunk.js.map